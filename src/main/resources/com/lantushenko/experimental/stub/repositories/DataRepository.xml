<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.lantushenko.experimental.stub.repositories.AggregatedDataRepository">
    <parameterMap id="loadAvgParam" type="java.lang.HashMap" >

    </parameterMap>
    <select id="load">
      SELECT AVG(${columnName}) FROM ${tableName} WHERE DATE_VAL &gt; #{periodStart} AND DATE_VAL &lt;= #{periodEnd}
        AND STATION_CODE IN
        <foreach collection="stationIds" item="stationId" open="(" close=")" separator="," index="idx">
            '#{stationId}'
        </foreach>
    </select>
</mapper>